"use strict";(self.webpackChunkfly_cuadros=self.webpackChunkfly_cuadros||[]).push([[592],{4463:(C,I,a)=>{a.d(I,{$:()=>_});var o=a(4004),f=a(7018),p=a(5e3),d=a(4959),g=a(5651);let _=(()=>{class m{constructor(h,e){this.db=h,this.measuresService=e}getPaintings(h){return this.db.collection(f.M.PAINTINGS,e=>e.where("tipo_cuadro","==",h)).valueChanges({idField:"id"}).pipe((0,o.U)(e=>e.map(i=>{var c,v;return Object.assign(Object.assign({},i),{medidas:null!==(v=null===(c=this.measuresService.measures$.getValue())||void 0===c?void 0:c.filter(b=>b.tipo===i.tipo_cuadro))&&void 0!==v?v:[]})})))}getPaintingDetail(h){return this.db.collection(f.M.PAINTINGS).doc(h).valueChanges()}getBoxDetail(h){return this.db.collection(f.M.BOX_TYPES).doc(h).valueChanges()}}return m.\u0275fac=function(h){return new(h||m)(p.LFG(d.ST),p.LFG(g.W))},m.\u0275prov=p.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},5381:(C,I,a)=>{a.d(I,{Y:()=>S});var o=a(7579),f=a(2722),t=a(5e3),p=a(8966),d=a(9808),g=a(9224),_=a(508),m=a(1863),l=a(5159);const h=["thumbNailDialog"],e=["matCarouselSlide"];function i(n,u){}function c(n,u){1&n&&t.YNc(0,i,0,0,"ng-template")}function v(n,u){if(1&n&&(t.ynx(0),t.TgZ(1,"mat-card",5),t.YNc(2,c,1,0,null,6),t.qZA(),t.BQk()),2&n){t.oxw();const s=t.MAs(6);t.xp6(2),t.Q6J("ngTemplateOutlet",s)}}function b(n,u){}function x(n,u){1&n&&t.YNc(0,b,0,0,"ng-template")}function E(n,u){if(1&n&&(t.TgZ(0,"mat-card",7),t.YNc(1,x,1,0,null,6),t.qZA()),2&n){t.oxw();const s=t.MAs(6);t.xp6(1),t.Q6J("ngTemplateOutlet",s)}}function T(n,u){if(1&n&&t._UZ(0,"img",13),2&n){const s=t.oxw(3);t.Q6J("src",s.cardInfo.imagen,t.LSH)}}function O(n,u){1&n&&t._UZ(0,"mat-carousel-slide",17),2&n&&t.Q6J("image",u.$implicit.src)("hideOverlay",!1)}function z(n,u){if(1&n){const s=t.EpF();t.TgZ(0,"div")(1,"mat-carousel",14,15),t.NdJ("click",function(M){return t.CHM(s),t.oxw(3).openThumbnail(M)}),t.YNc(3,O,1,2,"mat-carousel-slide",16),t.qZA()()}if(2&n){const s=t.oxw(3);let r;t.Udp("height","400px"),t.xp6(1),t.Q6J("autoplay",!1)("proportion",100)("slides",null!==(r=null==s.cardInfo.imagenes?null:s.cardInfo.imagenes.length)&&void 0!==r?r:0)("hideArrows",!1)("hideIndicators",!1)("useKeyboard",!0),t.xp6(2),t.Q6J("ngForOf",s.cardInfo.imagenes)}}function R(n,u){if(1&n&&(t.TgZ(0,"mat-card-header"),t._UZ(1,"div",8),t.TgZ(2,"mat-card-title"),t._uU(3),t.qZA()(),t.YNc(4,T,1,1,"img",9),t.YNc(5,z,4,9,"ng-template",null,10,t.W1O),t.TgZ(7,"mat-card-content")(8,"p",11),t._uU(9),t.qZA(),t._UZ(10,"div"),t.qZA(),t.TgZ(11,"mat-card-footer")(12,"mat-card-actions",12),t.Hsn(13,1,["slot","actions"]),t.qZA()()),2&n){const s=t.MAs(6),r=t.oxw(2);t.xp6(3),t.Oqu(r.cardInfo.nombre),t.xp6(1),t.Q6J("ngIf",r.cardInfo.imagen)("ngIfElse",s),t.xp6(5),t.hij(" ",r.cardInfo.descripcion," ")}}function P(n,u){if(1&n&&t._UZ(0,"lib-ngx-image-zoom",18),2&n){const s=t.oxw(2);t.Q6J("thumbImage",s.selectedImage.src)("fullImage",s.selectedImage.src)("enableLens",!0)("circularLens",!0)("magnification",1.5)("lensWidth",150)("lensHeight",150)}}function Z(n,u){if(1&n&&(t.ynx(0),t.YNc(1,v,3,1,"ng-container",1),t.YNc(2,E,2,1,"ng-template",null,2,t.W1O),t.Hsn(4,0,["slot","overlay"]),t.YNc(5,R,14,4,"ng-template",null,3,t.W1O),t.YNc(7,P,1,7,"ng-template",null,4,t.W1O),t.BQk()),2&n){const s=t.MAs(3),r=t.oxw();t.xp6(1),t.Q6J("ngIf",r.showRipple)("ngIfElse",s)}}const L=["*","*"];let S=(()=>{class n{constructor(s){this.dialog=s,this.showRipple=!0,this.onDestroy$=new o.x}ngOnInit(){}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}ngAfterViewInit(){this.matCarouselSlide&&(this.matCarouselSlide.changeEmitter.asObservable().pipe((0,f.R)(this.onDestroy$)).subscribe(s=>{var r,M;this.selectedImage=null===(M=null===(r=this.cardInfo)||void 0===r?void 0:r.imagenes)||void 0===M?void 0:M[s],this.cardInfo&&(this.cardInfo.imagenSeleccionada=this.selectedImage)}),this.matCarouselSlide.changeEmitter.emit(0))}openThumbnail(s){s.target&&["MAT-ICON","BUTTON"].includes(s.target.nodeName)||this.dialog.open(this.thumbNailDialog,{panelClass:["no-padding-dialog","width80"]})}}return n.\u0275fac=function(s){return new(s||n)(t.Y36(p.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-image-card"]],viewQuery:function(s,r){if(1&s&&(t.Gf(h,5),t.Gf(e,5)),2&s){let M;t.iGM(M=t.CRH())&&(r.thumbNailDialog=M.first),t.iGM(M=t.CRH())&&(r.matCarouselSlide=M.first)}},inputs:{cardInfo:"cardInfo",showRipple:"showRipple"},ngContentSelectors:L,decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngIf","ngIfElse"],["noRippleCard",""],["cardTemplate",""],["thumbNailDialog",""],["mat-ripple","",1,"image-card"],[4,"ngTemplateOutlet"],[1,"image-card"],["mat-card-avatar",""],["mat-card-image","",3,"src",4,"ngIf","ngIfElse"],["carouselTemplate",""],[2,"margin-top","16px"],[1,"image-actions"],["mat-card-image","",3,"src"],["timings","250ms ease-in","color","primary","maxWidth","auto","orientation","ltr",3,"autoplay","proportion","slides","hideArrows","hideIndicators","useKeyboard","click"],["matCarouselSlide",""],["overlayColor","#00000040",3,"image","hideOverlay",4,"ngFor","ngForOf"],["overlayColor","#00000040",3,"image","hideOverlay"],[3,"thumbImage","fullImage","enableLens","circularLens","magnification","lensWidth","lensHeight"]],template:function(s,r){1&s&&(t.F$t(L),t.YNc(0,Z,9,2,"ng-container",0)),2&s&&t.Q6J("ngIf",r.cardInfo)},directives:[d.O5,g.a8,_.wG,d.tP,g.dk,g.kc,g.n5,g.G2,m.m8,d.sg,m.$S,g.dn,g.rt,g.hq,l.r],styles:["[_nghost-%COMP%]{position:relative}.image-card[_ngcontent-%COMP%]{transition:box-shadow .28s cubic-bezier(.4,0,.2,1);height:100%;display:flex;flex-direction:column;justify-content:space-between;max-height:520px;min-height:520px}.image-card[_ngcontent-%COMP%]:hover{cursor:pointer;box-shadow:0 7px 8px -4px #0003,0 12px 17px 2px #00000024,0 5px 22px 4px #0000001f}.image-actions[_ngcontent-%COMP%]{max-width:100%;margin-left:0!important}  mat-carousel button:not(.mat-button-disabled){background-color:#fff!important}  mat-carousel .carousel-indicators button{width:15px!important;height:15px!important}"]}),n})()},5885:(C,I,a)=>{a.d(I,{B:()=>p});var o=a(7018),f=a(5e3),t=a(4959);let p=(()=>{class d{constructor(_){this.db=_}storePurchase(_){return this.db.collection(o.M.PURCHASE).add(_)}getPurchase(_){return this.db.collection(o.M.PURCHASE).doc(_).valueChanges({idField:"id"})}}return d.\u0275fac=function(_){return new(_||d)(f.LFG(t.ST))},d.\u0275prov=f.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},4466:(C,I,a)=>{a.d(I,{m:()=>_});var o=a(9808),f=a(3075),t=a(5159),p=a(4872),d=a(1863),g=a(5e3);let _=(()=>{class m{}return m.\u0275fac=function(h){return new(h||m)},m.\u0275mod=g.oAB({type:m}),m.\u0275inj=g.cJS({providers:[],imports:[[p.q,f.u5,f.UX,o.ez,t.L,d.i4]]}),m})()},5159:(C,I,a)=>{a.d(I,{r:()=>_,L:()=>m});var o=a(5e3),f=a(9808);const t=["zoomContainer"],p=["imageThumbnail"],d=["fullSizeImage"],g=function(l){return{ngxImageZoomFullContainer:!0,ngxImageZoomLensEnabled:l}};let _=(()=>{class l{constructor(e,i){this.renderer=e,this.changeDetectorRef=i,this.zoomScroll=new o.vpe,this.zoomPosition=new o.vpe,this.imagesLoaded=new o.vpe,this.enableLens=!1,this.lensBorderRadius=0,this.thumbWidth=0,this.thumbHeight=0,this.fullWidth=0,this.fullHeight=0,this.lensWidth=100,this.lensHeight=100,this.zoomMode="hover",this.magnification=1,this.enableScrollZoom=!1,this.scrollStepSize=.1,this.circularLens=!1,this.minZoomRatio=1,this.maxZoomRatio=2,this.xRatio=0,this.yRatio=0,this.zoomingEnabled=!1,this.zoomFrozen=!1,this.isReady=!1,this.thumbImageLoaded=!1,this.fullImageLoaded=!1,this.latestMouseLeft=-1,this.latestMouseTop=-1,this.eventListeners=[],this.altText="",this.titleText=""}set setThumbImage(e){this.thumbImageLoaded=!1,this.setIsReady(!1),this.thumbImage=e}set setFullImage(e){this.fullImageLoaded=!1,this.setIsReady(!1),this.fullImage=e}set setZoomMode(e){l.validZoomModes.some(i=>i===e)&&(this.zoomMode=e)}set setMagnification(e){this.magnification=Number(e)||this.magnification,this.zoomScroll.emit(this.magnification)}set setMinZoomRatio(e){const i=Number(e)||this.minZoomRatio||this.baseRatio||0;this.minZoomRatio=Math.max(i,this.baseRatio||0)}set setMaxZoomRatio(e){this.maxZoomRatio=Number(e)||this.maxZoomRatio}set setScrollStepSize(e){this.scrollStepSize=Number(e)||this.scrollStepSize}set setEnableLens(e){this.enableLens=Boolean(e)}set setLensWidth(e){this.lensWidth=Number(e)||this.lensWidth}set setLensHeight(e){this.lensHeight=Number(e)||this.lensHeight}set setCircularLens(e){this.circularLens=Boolean(e)}set setEnableScrollZoom(e){this.enableScrollZoom=Boolean(e)}ngOnInit(){this.setUpEventListeners()}ngOnChanges(){this.enableLens&&(this.lensBorderRadius=this.circularLens?this.lensWidth/2:0),this.calculateRatioAndOffset(),this.calculateImageAndLensPosition()}ngOnDestroy(){this.eventListeners.forEach(e=>e())}onThumbImageLoaded(){this.thumbImageLoaded=!0,this.checkImagesLoaded()}onFullImageLoaded(){this.fullImageLoaded=!0,this.checkImagesLoaded()}setUpEventListeners(){const e=this.zoomContainer.nativeElement;switch(this.zoomMode){case"hover":this.eventListeners.push(this.renderer.listen(e,"mouseenter",i=>this.hoverMouseEnter(i)),this.renderer.listen(e,"mouseleave",()=>this.hoverMouseLeave()),this.renderer.listen(e,"mousemove",i=>this.hoverMouseMove(i)));break;case"toggle":this.eventListeners.push(this.renderer.listen(e,"click",i=>this.toggleClick(i)));break;case"toggle-click":this.eventListeners.push(this.renderer.listen(e,"click",i=>this.toggleClick(i)),this.renderer.listen(e,"mouseleave",()=>this.clickMouseLeave()),this.renderer.listen(e,"mousemove",i=>this.clickMouseMove(i)));break;case"click":this.eventListeners.push(this.renderer.listen(e,"click",i=>this.clickStarter(i)),this.renderer.listen(e,"mouseleave",()=>this.clickMouseLeave()),this.renderer.listen(e,"mousemove",i=>this.clickMouseMove(i)));break;case"hover-freeze":this.eventListeners.push(this.renderer.listen(e,"mouseenter",i=>this.hoverFreezeMouseEnter(i)),this.renderer.listen(e,"mouseleave",()=>this.hoverFreezeMouseLeave()),this.renderer.listen(e,"mousemove",i=>this.hoverFreezeMouseMove(i)),this.renderer.listen(e,"click",i=>this.hoverFreezeClick(i)))}this.enableScrollZoom&&this.eventListeners.push(this.renderer.listen(e,"mousewheel",i=>this.onMouseWheel(i)),this.renderer.listen(e,"DOMMouseScroll",i=>this.onMouseWheel(i)),this.renderer.listen(e,"onmousewheel",i=>this.onMouseWheel(i))),this.enableLens&&this.circularLens&&(this.lensBorderRadius=this.lensWidth/2)}checkImagesLoaded(){this.calculateRatioAndOffset(),this.thumbImageLoaded&&this.fullImageLoaded&&(this.calculateImageAndLensPosition(),this.setIsReady(!0))}setIsReady(e){this.isReady=e,this.imagesLoaded.emit(e)}setZoomPosition(e,i){this.latestMouseLeft=Number(e)||this.latestMouseLeft,this.latestMouseTop=Number(i)||this.latestMouseTop,this.zoomPosition.emit({x:this.latestMouseLeft,y:this.latestMouseTop})}onMouseWheel(e){this.zoomingEnabled&&!this.zoomFrozen&&(e=window.event||e,this.setMagnification=Math.max(Math.min(e.wheelDelta||-e.detail,1),-1)>0?Math.min(this.magnification+this.scrollStepSize,this.maxZoomRatio):Math.max(this.magnification-this.scrollStepSize,this.minZoomRatio),this.calculateRatio(),this.calculateZoomPosition(e),e.returnValue=!1,e.preventDefault&&e.preventDefault())}hoverMouseEnter(e){this.zoomOn(e)}hoverMouseLeave(){this.zoomOff()}hoverMouseMove(e){this.calculateZoomPosition(e)}toggleClick(e){this.zoomingEnabled?this.zoomOff():this.zoomOn(e)}clickStarter(e){!1===this.zoomingEnabled&&this.zoomOn(e)}clickMouseLeave(){this.zoomOff()}clickMouseMove(e){this.zoomingEnabled&&this.calculateZoomPosition(e)}hoverFreezeMouseEnter(e){this.zoomingEnabled&&!this.zoomFrozen&&this.zoomOn(e)}hoverFreezeMouseLeave(){this.zoomingEnabled&&!this.zoomFrozen&&this.zoomOff()}hoverFreezeMouseMove(e){this.zoomingEnabled&&!this.zoomFrozen&&this.calculateZoomPosition(e)}hoverFreezeClick(e){this.zoomingEnabled&&this.zoomFrozen?(this.zoomFrozen=!1,this.zoomOff()):this.zoomingEnabled?(this.zoomFrozen=!0,this.changeDetectorRef.markForCheck()):this.zoomOn(e)}zoomOn(e){this.isReady&&(this.zoomingEnabled=!0,this.calculateRatioAndOffset(),this.display="block",this.calculateZoomPosition(e),this.changeDetectorRef.markForCheck())}zoomOff(){this.zoomingEnabled=!1,this.display="none",this.changeDetectorRef.markForCheck()}calculateZoomPosition(e){const i=Math.max(Math.min(e.offsetX,this.thumbWidth),0),c=Math.max(Math.min(e.offsetY,this.thumbHeight),0);this.setZoomPosition(i,c),this.calculateImageAndLensPosition(),this.changeDetectorRef.markForCheck()}calculateImageAndLensPosition(){let e=0,i=0;this.enableLens&&this.latestMouseLeft>0&&(e=this.lensLeft=this.latestMouseLeft-this.lensWidth/2,i=this.lensTop=this.latestMouseTop-this.lensHeight/2),this.fullImageLeft=this.latestMouseLeft*-this.xRatio-e,this.fullImageTop=this.latestMouseTop*-this.yRatio-i}calculateRatioAndOffset(){this.thumbWidth=this.imageThumbnail.nativeElement.width,this.thumbHeight=this.imageThumbnail.nativeElement.height,this.enableLens||(this.lensWidth=this.thumbWidth,this.lensHeight=this.thumbHeight,this.lensLeft=0,this.lensTop=0),this.offsetTop=this.imageThumbnail.nativeElement.getBoundingClientRect().top,this.offsetLeft=this.imageThumbnail.nativeElement.getBoundingClientRect().left,void 0===this.fullImage&&(this.fullImage=this.thumbImage),this.fullImageLoaded&&(this.fullWidth=this.fullSizeImage.nativeElement.naturalWidth,this.fullHeight=this.fullSizeImage.nativeElement.naturalHeight,this.baseRatio=Math.max(this.thumbWidth/this.fullWidth,this.thumbHeight/this.fullHeight),this.minZoomRatio=Math.max(this.minZoomRatio||0,this.baseRatio||0),this.calculateRatio())}calculateRatio(){this.magnifiedWidth=this.fullWidth*this.magnification,this.magnifiedHeight=this.fullHeight*this.magnification,this.xRatio=(this.magnifiedWidth-this.thumbWidth)/this.thumbWidth,this.yRatio=(this.magnifiedHeight-this.thumbHeight)/this.thumbHeight}}return l.validZoomModes=["hover","toggle","click","toggle-click","hover-freeze"],l.\u0275fac=function(e){return new(e||l)(o.Y36(o.Qsj),o.Y36(o.sBO))},l.\u0275cmp=o.Xpm({type:l,selectors:[["lib-ngx-image-zoom"]],viewQuery:function(e,i){if(1&e&&(o.Gf(t,7),o.Gf(p,7),o.Gf(d,7)),2&e){let c;o.iGM(c=o.CRH())&&(i.zoomContainer=c.first),o.iGM(c=o.CRH())&&(i.imageThumbnail=c.first),o.iGM(c=o.CRH())&&(i.fullSizeImage=c.first)}},inputs:{setThumbImage:["thumbImage","setThumbImage"],setFullImage:["fullImage","setFullImage"],setZoomMode:["zoomMode","setZoomMode"],setMagnification:["magnification","setMagnification"],setMinZoomRatio:["minZoomRatio","setMinZoomRatio"],setMaxZoomRatio:["maxZoomRatio","setMaxZoomRatio"],setScrollStepSize:["scrollStepSize","setScrollStepSize"],setEnableLens:["enableLens","setEnableLens"],setLensWidth:["lensWidth","setLensWidth"],setLensHeight:["lensHeight","setLensHeight"],setCircularLens:["circularLens","setCircularLens"],setEnableScrollZoom:["enableScrollZoom","setEnableScrollZoom"],altText:"altText",titleText:"titleText"},outputs:{zoomScroll:"zoomScroll",zoomPosition:"zoomPosition",imagesLoaded:"imagesLoaded"},features:[o.TTD],decls:7,vars:35,consts:[[1,"ngxImageZoomContainer"],["zoomContainer",""],[1,"ngxImageZoomThumbnail",3,"alt","title","src","load"],["imageThumbnail",""],[3,"ngClass"],[1,"ngxImageZoomFull",3,"alt","title","src","load"],["fullSizeImage",""]],template:function(e,i){1&e&&(o.TgZ(0,"div",0,1)(2,"img",2,3),o.NdJ("load",function(){return i.onThumbImageLoaded()}),o.qZA(),o.TgZ(4,"div",4)(5,"img",5,6),o.NdJ("load",function(){return i.onFullImageLoaded()}),o.qZA()()()),2&e&&(o.Udp("width",i.thumbWidth,"px")("height",i.thumbHeight,"px"),o.xp6(2),o.Q6J("alt",i.altText)("title",i.titleText)("src",i.thumbImage,o.LSH),o.xp6(2),o.Udp("display",i.display)("top",i.lensTop,"px")("left",i.lensLeft,"px")("width",i.lensWidth,"px")("height",i.lensHeight,"px")("border-radius",i.lensBorderRadius,"px"),o.Q6J("ngClass",o.VKq(33,g,i.enableLens)),o.xp6(1),o.Udp("display",i.display)("top",i.fullImageTop,"px")("left",i.fullImageLeft,"px")("width",i.magnifiedWidth,"px")("height",i.magnifiedHeight,"px"),o.Q6J("alt",i.altText)("title",i.titleText)("src",i.fullImage,o.LSH))},directives:[f.mk],styles:[".ngxImageZoomContainer[_ngcontent-%COMP%]{position:relative;margin:auto;overflow:hidden;pointer-events:none}.ngxImageZoomThumbnail[_ngcontent-%COMP%]{pointer-events:all}.ngxImageZoomFull[_ngcontent-%COMP%]{position:absolute;max-width:none;max-height:none;display:none;pointer-events:none}.ngxImageZoomFullContainer[_ngcontent-%COMP%]{position:absolute;overflow:hidden;pointer-events:none}.ngxImageZoomFullContainer.ngxImageZoomLensEnabled[_ngcontent-%COMP%]{border:2px solid red;cursor:crosshair;pointer-events:none}"]}),l})(),m=(()=>{class l{}return l.\u0275fac=function(e){return new(e||l)},l.\u0275mod=o.oAB({type:l}),l.\u0275inj=o.cJS({imports:[[f.ez]]}),l})()}}]);